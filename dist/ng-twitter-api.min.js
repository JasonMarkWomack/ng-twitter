// ng-twitter-api - v0.1.1 (2015-07-03)
// http://www.devdactic.com
angular.module("twitter.functions",[]).factory("$twitterApi",["$q","$twitterHelpers","$http",function(a,b,c){function d(a,b,d){return c({method:"GET",url:a,params:b}).success(function(a,b,c,e){d.resolve(a)}).error(function(a,b,c,e){401===b&&(g=null),d.reject(b)}),d.promise}function e(a,b,d){return c.post(a,b).success(function(a,b,c,e){d.resolve(a)}).error(function(a,b,c,e){401===b&&(g=null),d.reject(b)}),d.promise}function f(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return console.log(b.join("&")),b.join("&")}var g,h="",i="",j="https://api.twitter.com/1.1/statuses/home_timeline.json",k="https://api.twitter.com/1.1/search/tweets.json",l="https://api.twitter.com/1.1/statuses/update.json";return{configure:function(a,b,c){h=a,i=b,g=c},getHomeTimeline:function(c){var e=a.defer();return"undefined"==typeof c&&(c={}),b.createTwitterSignature("GET",j,c,h,i,g),d(j,c,e)},searchTweets:function(c,e){var f=a.defer();"undefined"==typeof e&&(e={}),e=angular.extend(e,{q:c});b.createTwitterSignature("GET",k,e,h,i,g);return d(k,e,f)},postStatusUpdate:function(c){var d=a.defer(),j={status:c};encodeURIComponent(c);return b.createTwitterSignature("POST",l,j,h,i,g),e(l+"?"+f(j),j,d)}}}]),angular.module("ngTwitter",["twitter.functions","twitter.utils"]),angular.module("twitter.utils",[]).factory("$twitterHelpers",["$q","$http",function(a,b){function c(a,b,c,d,e,f){if("undefined"!=typeof jsSHA){for(var g=angular.copy(c),h=Object.keys(d),i=0;i<h.length;i++)g[h[i]]=encodeURIComponent(d[h[i]]);var j=a+"&"+encodeURIComponent(b)+"&",k=Object.keys(g).sort();for(i=0;i<k.length;i++)j+=i==k.length-1?encodeURIComponent(k[i]+"="+g[k[i]]):encodeURIComponent(k[i]+"="+g[k[i]]+"&");var l=new jsSHA(j,"TEXT"),m="";f&&(m=encodeURIComponent(f)),c.oauth_signature=encodeURIComponent(l.getHMAC(encodeURIComponent(e)+"&"+m,"TEXT","SHA-1","B64"));var n=Object.keys(c),o="OAuth ";for(i=0;i<n.length;i++)o+=i==n.length-1?n[i]+'="'+c[n[i]]+'"':n[i]+'="'+c[n[i]]+'",';return{signature_base_string:j,authorization_header:o,signature:c.oauth_signature}}return"Missing jsSHA JavaScript library"}function d(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;a>d;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b}return{createTwitterSignature:function(a,e,f,g,h,i){var j={oauth_consumer_key:g,oauth_nonce:d(10),oauth_signature_method:"HMAC-SHA1",oauth_token:i.oauth_token,oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_version:"1.0"},k=c(a,e,j,f,h,i.oauth_token_secret);return b.defaults.headers.common.Authorization=k.authorization_header,k}}}]);